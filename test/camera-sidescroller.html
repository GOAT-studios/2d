<!DOCTYPE html>
<html>
	<head>
		<title>Core test</title>

		<script type="text/javascript" src="../src/core/core.js"></script>
		<script type="text/javascript" src="../src/plugins/camera-sidescroller.js"></script>
	</head>
	<body>
		
		<script type="text/javascript">
		
			var assets = {
				name: "very-basic-assets",
				type: "Assets",
				Init: function(game) {
					this.assets = [];
				},
				load: function(url) {
					this.assets.push(url);
				},
				get: function(url) {
					return url;
				}
			}

			var colliders = {
				name: "very-basic-colliders",
				type: "Colliders",
				Box: function(vector, w, h) {
					this.pos    = vector;
					this.width  = x;
					this.height = h;
					return this;
				},
				test: function(a, b) {
					return a === b;
				}
			}

			var draw = {
				name: "very-basic-draw",
				type: "Draw",
				Init: function(game) {

					// Use 'Singleton Pattern' to reuse a draw object, but still be able to use private vars (e.g. offset)
					// http://addyosmani.com/resources/essentialjsdesignpatterns/book/#singletonpatternjavascript
					this.canvas  = document.createElement("canvas");
					this.context = this.canvas.getContext("2d");

					return this.canvas;
				},
				rect: function(x, y, w, h) {
					this.fillStyle = "#FF0000";
					this.context.fillRect(x, y, w, y);
				}
			}

			var sound = {
				name: "very-basic-sound",
				type: "Sound",
				play: function(url) {
					console.log("Playing sound:", game.Assets.get(url));
				}
			}

			var world = {
				name: "very-basic-world",
				type: "World",
				Init: function(game) {
					this.world = [
						function(d) {d.rect(0,0,100,150);}
					];
				},
				Update: function(game) {
					for(var i = 0, len = this.world.length; i < len; i++) {
						this.world[i](game.Draw);
					}
				}
			}


			var plugins = [new Camera(), assets, colliders, draw, sound, world];


			var game = new Game({}, plugins);

		</script>
	</body>
</html>